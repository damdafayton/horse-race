(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{57:function(e,t,a){e.exports={container:"WinnerModal_container__260aH",gif:"WinnerModal_gif__3mnTx"}},58:function(e,t,a){e.exports={horses:"Horses_horses__1rnSf",rotateHorse:"Horses_rotateHorse__XBJ_V",names:"Horses_names__313sw",gif:"Horses_gif__1qRC0"}},88:function(e,t,a){},89:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n,c=a(0),s=a.n(c),r=a(40),i=a.n(r),o=a(14),d=a(7),l=a(1),u=a(55),j=a(64),m=a(66),f=a(16),h=a(71),b="https://horse-racing-server.herokuapp.com/",O={API_URL:b,API_ENDPOINT_FOR_REDUX:"api",API_URL_FOR_SOCKET:b,SOCKET_START_MESSAGE:"start",SOCKET_TICKER_MESSAGE:"ticker",MAX_DISTANCE:1e3},x=O.API_URL,p=O.SOCKET_TICKER_MESSAGE,_=O.API_ENDPOINT_FOR_REDUX,g=O.API_URL_FOR_SOCKET,E=O.SOCKET_START_MESSAGE,R=Object(m.a)({reducerPath:"dataApi",baseQuery:Object(f.d)({baseUrl:x}),endpoints:function(e){return{raceData:e.query({query:function(){return _},onCacheEntryAdded:function(e,t){return Object(j.a)(Object(u.a)().mark((function e(){var a,n,c,s;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.updateCachedData,n=t.cacheDataLoaded,c=t.cacheEntryRemoved,e.prev=1,e.next=4,n;case 4:(s=Object(h.a)(g)).on("connect",(function(){s.emit(E)})),s.on(p,(function(e){a((function(t){t.push(e)}))})),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:return e.next=13,c;case 13:s.off();case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()}})}}}),N=R.useRaceDataQuery,v={maxWidth:15,isRaceEnded:!1,latestRaceData:void 0,winner:void 0},y=Object(l.d)({name:"horses",initialState:v,reducers:{updateLatestRaceData:function(e,t){e.latestRaceData=t.payload},zoomIn:function(e){e.maxWidth+=1},zoomOut:function(e){e.maxWidth-=1},endTheRace:function(e){e.isRaceEnded=!0},setWinner:function(e,t){e.winner=t.payload}}}),S=y.actions,A=S.updateLatestRaceData,T=S.zoomIn,w=S.zoomOut,I=S.endTheRace,C=S.setWinner,D=y.reducer,H=Object(l.a)({reducer:(n={},Object(d.a)(n,R.reducerPath,R.reducer),Object(d.a)(n,"horses",D),n),middleware:function(e){return e().concat(R.middleware)}}),P=(a(88),a(89),a(24)),k=a(69),W=a.n(k),M=a(70),K=a.n(M),L=a(68),U=a.n(L),F=a(67),G=a.n(F),X=a(57),z=a.n(X),q=a(3);function J(){var e=Object(P.d)((function(e){return e.horses})).winner;return e&&Object(q.jsx)("section",{className:z.a.container,children:Object(q.jsxs)("div",{className:"mt-3 d-flex flex-column align-items-center",children:[Object(q.jsx)("h1",{className:"fs-4 text-center text-primary",children:"WINNER"}),Object(q.jsx)("h1",{className:"mb-5 mt-2 text-center",children:e.name.toUpperCase()}),Object(q.jsx)("img",{alt:"winner",className:z.a.gif,src:e.gif})]})})}var B=a(35),Q=a(15),V=a(58),Y=a.n(V),Z=a.p+"static/media/l1.8ba713ae.gif",$=a.p+"static/media/l2.826e2d8e.gif",ee=a.p+"static/media/l_miracle.dfb40033.gif",te=a.p+"static/media/r1.662feb6e.gif",ae=a.p+"static/media/r2.3a353552.gif",ne=a.p+"static/media/r3.7a54ba2a.gif",ce=O.MAX_DISTANCE;function se(){var e=N().data,t=Object(P.d)((function(e){return e.horses})),a=t.maxWidth,n=t.latestRaceData,s=t.isRaceEnded,r=Object(P.c)(),i=[{gif:Z,style:"rotateHorse"},{gif:$,style:"rotateHorse"},{gif:ee,style:"rotateHorse"},{gif:te,style:"horses"},{gif:ae,style:"horses"},{gif:ne,style:"horses"}];return Object(c.useEffect)((function(){if(!s&&e&&e.length){var t=e[e.length-1],a=t.filter((function(e){return e.distance>=ce})),n=Object(Q.a)(a,1)[0];if(n)return n=Object(B.a)(Object(B.a)({},n),i[t.indexOf(n)]),r(I()),void setTimeout((function(){return r(C(n))}),3e3);r(A(t))}}),[e]),Object(q.jsx)("section",{className:"mb-3",children:Object(q.jsx)("div",{className:"d-flex flex-column text-start",children:n?n.map((function(e,t){return Object(q.jsxs)("div",{children:[Object(q.jsx)("h2",{className:Y.a.names,children:e.name}),Object(q.jsx)("img",{alt:"horse",src:i[t].gif,style:{maxWidth:"".concat(a,"vw"),marginLeft:"".concat((100-a)*e.distance/ce-3,"vw")},className:Y.a[i[t].style]})]},"".concat(e.name))})):Object(q.jsx)("div",{className:"text-center",children:"It takes 20 to 40 seconds to receive initial data from Heroku server. Please wait.."})})})}var re=function(){var e=Object(P.c)(),t=Object(P.d)((function(e){return e.horses})).winner,a=U()(),n=a.width,c=a.height;return Object(q.jsxs)("div",{className:"App",children:[Object(q.jsxs)("header",{className:"App-header py-2 position-relative mb-3 px-4",children:[Object(q.jsx)("h1",{className:"fs-5 my-0 py-0",children:"HORSE RACING"}),Object(q.jsxs)("span",{className:"position-absolute end-0 gap-2 ",children:[Object(q.jsx)("button",{type:"button",className:"btn-clean text-white me-2",onClick:function(){return e(T())},children:Object(q.jsx)(W.a,{className:"h-2rem"})}),Object(q.jsx)("button",{type:"button",className:"btn-clean text-white me-4",onClick:function(){return e(w())},children:Object(q.jsx)(K.a,{className:"h-2rem"})})]})]}),Object(q.jsx)("main",{children:Object(q.jsx)(se,{})}),t&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(G.a,{width:n-30,height:c}),Object(q.jsx)(J,{})]})]})};i.a.render(Object(q.jsx)(s.a.StrictMode,{children:Object(q.jsx)(o.a,{store:H,children:Object(q.jsx)(re,{})})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.4e3f89dd.chunk.js.map